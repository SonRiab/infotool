{% extends "portal/base.html" %}

{% comment "License" %}
    Copyright (C) 2014  Rene Jablonski

    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; version 2
    of the License.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
{% endcomment %}

{% block title %}{{ site.title }}{% endblock %}

{% load i18n %}
{% load render_as_template %}
{% load staticfiles %}

{% block base_css_style %}
    <link type="text/css" rel="stylesheet" href="{% static "css/portal/player.css" %}" charset="utf-8" media="all">
{% endblock %}

{% block base_js_script %}
    <script type="text/javascript" src="{% static "js/portal/jquery.jplayer.min.js" %}" charset="utf-8"></script>
    {% if  site.audio_file_1 and site.audio_file_2 %}
        <script type="text/javascript">
            $(function() {
                $("#jquery_jplayer_1").jPlayer({
                    ready: function () {
                        $(this).jPlayer("setMedia", {
                            mp3: "/media/{{ site.audio_file_1 }}",
                            oga: "/media/{{ site.audio_file_2 }}"
                        });
                    },
                    swfPath: "/static/js/portal",
                    supplied: "mp3, oga"
                });
            });
        </script>
    {% endif %}
{% endblock %}

{% block content %}
    {% autoescape off %}
        {% if site.is_special %}
            {% render_as_template site.content %}
        {% else %}
            {{ site.content }}
        {% endif %}
    {% endautoescape %}
    {% if site.audio_file_1 and site.audio_file_2 %}
        <div id="jquery_jplayer_1" class="jp-jplayer"></div>
        <div id="jp_container_1" class="jp-container">
        <div class="jp-interface">
            <ul class="jp-controls">
                <li>
                    <a href="javascript:;" class="jp-play" tabindex="1" title="{% trans 'Play' %}">
                        <span class="icon-play3"></span>
                        <span class="display-none">{% trans 'Play' %}</span>
                    </a>
                </li>
                <li>
                    <a href="javascript:;" class="jp-pause" tabindex="1" title="{% trans 'Pause' %}">
                        <span class="icon-pause2"></span>
                        <span class="display-none">{% trans 'Pause' %}</span>
                    </a>
                </li>
                <li>
                    <a href="javascript:;" class="jp-stop" tabindex="1" title="{% trans 'Stop' %}">
                        <span class="icon-stop2"></span>
                        <span class="display-none">{% trans 'Stop' %}</span>
                    </a>
                </li>
                <li>
                    <a href="javascript:;" class="jp-mute" tabindex="1" title="{% trans 'Mute' %}">
                        <span class="icon-volume-mute2"></span>
                        <span class="display-none">{% trans 'Mute' %}</span>
                    </a>
                </li>
                <li>
                    <a href="javascript:;" class="jp-unmute" tabindex="1" title="{% trans 'Unmute' %}">
                        <span class="icon-volume-low"></span>
                        <span class="display-none">{% trans 'Unmute' %}</span>
                    </a>
                </li>
                <li>
                    <div class="jp-volume-bar" title="{% trans 'Volume' %}">
                        <div class="jp-volume-bar-value red-bg"></div>
                    </div>
                </li>
                <li>
                    <a href="javascript:;" class="jp-volume-max" tabindex="1" title="{% trans 'Maximum' %}">
                        <span class="icon-volume-high"></span>
                        <span class="display-none">{% trans 'Maximum' %}</span>
                    </a>
                </li>
            </ul>
            <div class="jp-seek-bar" title="{% trans 'Volume' %}">
                <div class="jp-play-bar red-bg"></div>
            </div>
        </div>
        <div class="jp-no-solution">
            <div>
                <span class="icon-info3"></span>
            </div>
            <div>
                <p>
                    To play the media you will need to either update your browser to a recent version or update your
                    <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
                </p>
            </div>
        </div>
    </div>
    {% endif %}
{% endblock %}
